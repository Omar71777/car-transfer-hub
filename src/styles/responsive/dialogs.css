
/* Dialog responsive styles */

@media (max-width: 768px) {
  /* Better dialog sizing for mobile */
  [role="dialog"] .dialog-content, 
  [role="alertdialog"] .dialog-content {
    @apply max-w-[92vw] max-h-[85vh] overflow-y-auto p-3;
  }
  
  /* Dialog fits better on mobile screens */
  .dialog-content {
    max-width: min(800px, 92vw);
    max-height: 85vh;
    overflow-y-auto;
  }
  
  /* Fix for mobile dialogs */
  [role="dialog"] {
    @apply p-2;
  }
  
  /* Improve dialog sizing and scrolling */
  [role="dialog"] .overflow-y-auto,
  [role="alertdialog"] .overflow-y-auto {
    max-height: 70vh;
  }
}

/* Fix for ghost overlays - this is a critical fix, but now scoped to dialog elements */
[role="dialog"][data-state="closed"],
[role="alertdialog"][data-state="closed"],
[data-radix-popper-content-wrapper][data-state="closed"],
.radix-sheet[data-state="closed"] {
  pointer-events: none !important; 
  animation-fill-mode: forwards !important;
  visibility: hidden !important;
}

/* Remove from DOM after animation completes - only for dialog-related elements */
[role="dialog"][data-state="closed"][data-removed="true"],
[role="alertdialog"][data-state="closed"][data-removed="true"] {
  display: none !important;
}

/* Ensure dialogs cleanup properly after animations */
[role="dialog"][data-state="closed"],
[role="alertdialog"][data-state="closed"] {
  animation-fill-mode: forwards !important;
  pointer-events: none !important;
}

/* Additional fix for popover and sheet components - keeping separate selectors */
[data-radix-popper-content-wrapper][data-state="closed"],
.radix-sheet[data-state="closed"] {
  pointer-events: none !important;
  visibility: hidden !important;
}

/* Prevent clicks through overlays when animating out */
[role="dialog"] ~ .fixed.inset-0[data-state="closed"],
[role="alertdialog"] ~ .fixed.inset-0[data-state="closed"] {
  pointer-events: none !important;
}

/* Force immediate removal for fully closed dialogs */
body:not(:has([role="dialog"][data-state="open"])):not(:has([role="alertdialog"][data-state="open"])) [role="dialog"][data-state="closed"],
body:not(:has([role="dialog"][data-state="open"])):not(:has([role="alertdialog"][data-state="open"])) [role="alertdialog"][data-state="closed"] {
  display: none !important;
}

/* Special fix for dropdowns - ensure they remain visible and interactive */
[data-radix-dropdown-menu-content][data-state="open"] {
  visibility: visible !important;
  pointer-events: all !important;
  z-index: 50;
}

/* Ensure dropdown menus don't get affected by dialog CSS */
[data-radix-dropdown-menu-content] {
  z-index: 50;
  background-color: var(--background);
  border: 1px solid var(--border);
}

